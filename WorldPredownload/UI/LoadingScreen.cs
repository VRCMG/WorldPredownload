using UnityEngine;


namespace WorldPredownload.UI
{
    public static class LoadingScreen
    {
        private static VRCUiPageLoading LoadingPage;
        private static GameObject LoadingElements;
        private static GameObject GoButton;

        
        public static void Setup()
        {
            LoadingPage = GameObject.Find(PATH_TO_LOADING_PAGE).GetComponent<VRCUiPageLoading>();
            LoadingElements = GameObject.Find(PATH_TO_LOADING_ELEMENTS);
            GoButton = GameObject.Find(PATH_TO_GO_BUTTON);
        }

        public static void SetComplete()
        { 
            foreach(var element in LoadingPage.loadingElements) element.SetActive(false);
            foreach(var button in LoadingPage.goButtons) button.SetActive(true);
        }

        public static void UpdateInfo(float percent, int downloadedBytes, int toDownloadBytes)
        {
            VRCUiPageLoading.Progress = percent;
            VRCUiPageLoading.SizeDownloaded = downloadedBytes;
            VRCUiPageLoading.SizeDownloading = toDownloadBytes;
        }
        
        
        
        private const string PATH_TO_LOADING_PAGE = "UserInterface/MenuContent/Popups/LoadingPopup";
        private const string PATH_TO_LOADING_ELEMENTS = "UserInterface/MenuContent/Popups/LoadingPopup/ProgressPanel/Parent_Loading_Progress/Loading Elements";
        private const string PATH_TO_GO_BUTTON = "UserInterface/MenuContent/Popups/LoadingPopup/ProgressPanel/Parent_Loading_Progress/GoButton";
         
    }
}